if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MessengerThreadlistFooterOpenInAppLink.bs",["fbt","ix","Actor.re","CometPressable.react","MDSRow.react","MDSRowItem.react","MWIcon.react","MWText.react","MessengerDesktopDeeplinkEventFalcoEvent","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","bs_caml_option","fbicon","react","stylex","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={root:{boxShadow:"usczdcwk",minHeight:"iihba337",":hover":{textDecoration:"p8dawk7l"},paddingTop:"jb3vyjys",paddingEnd:"gl4o1x5y",paddingBottom:"qt6c0cv9",paddingStart:"lt9micmv","@media (max-width: 900px)":{width:"g0mhvs5p"}},button:{display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn"},icon:{marginEnd:"fv0vnmcu"},content:{"@media (max-width: 900px)":{display:"ahb00how"}}};function a(a){a=b("Actor.re").useActor();var c=k.useRef(!1),d=k.useRef(b("uuid")()).current;k.useEffect(function(){c.current||(c.current=!0,b("MessengerDesktopDeeplinkEventFalcoEvent").log(function(a){return{event:"messenger_threadlist_open_in_app_impression",eventLocation:"browser",eventType:"thread",funnelSessionId:d,mobile_app_source:"unknown"}}))});a=b("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri({funnel_session_id:d,id:b("bs_caml_option").some(a[0]),thread:void 0,origin:"MSG"}).setDomain("www.messenger.com").setProtocol("https").toString();var e=k.useCallback(function(a){b("MessengerDesktopDeeplinkEventFalcoEvent").log(function(a){return{event:"messenger_threadlist_open_in_app_click",eventLocation:"browser",eventType:"thread",funnelSessionId:d,mobile_app_source:"unknown"}})},[]),f=g._(/*FBT_CALL*/"Open Messenger app"/*FBT_CALL*/);return k.jsx(b("MDSRow.react"),{paddingHorizontal:8,paddingVertical:8,verticalAlign:"center",expanding:!0,spacing:0,xstyle:[l.root],children:k.jsx(b("MDSRowItem.react"),{expanding:!0,children:k.jsx(b("CometPressable.react"),{"aria-label":f,expanding:!0,linkProps:{target:"_blank",url:a},onPress:e,overlayOffset:10,overlayRadius:6,children:k.jsxs("div",{className:(j||(j=b("stylex")))(l.button),children:[k.jsx("span",{className:j(l.icon),children:k.jsx(b("MWIcon.react"),{icon:b("fbicon")._(h("505620"),20),color:"primary"})}),k.jsx("span",{className:j(l.content),children:k.jsx(b("MWText.react"),{align:"center",type:"bodyLink3",children:f.toString()})})]})})})})}c=a;f.styles=l;f.make=c}),null);
__d("MWCMBlendedThreadListLazy.bs",["BootloaderResource","JSResource","bs_caml_option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResource")("MWCMBlendedThreadList.bs").__setRef("MWCMBlendedThreadListLazy.bs");function j(a,c,d,e,f,g,h,i,j){j={gridLabel:a,lsEntryPoint:d,messagingEntrypoint:e,responsive:g,setHasScrolled:i};c!==void 0&&(j.header=b("bs_caml_option").valFromOption(c));f!==void 0&&(j.onClose=b("bs_caml_option").valFromOption(f));h!==void 0&&(j.selectedThreadKey=h);return j}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}c={reasonResource:i,makeProps:j,make:k};function a(a){var b=a.gridLabel,c=a.header,d=a.lsEntryPoint,e=a.messagingEntrypoint,f=a.onClose,g=a.responsive,i=a.selectedThreadKey;a=a.setHasScrolled;return h.jsx(k,j(b,c,d,e,f,g,i,a,void 0))}d=a;f.MWCMBlendedThreadListLazyImpl=c;f.make=d}),null);
__d("MWInboxContextSwitcherDeferred.bs",["bs_caml_option","deferredLoadComponentForReason","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferredForDisplay")("MWInboxContextSwitcher.bs").__setRef("MWInboxContextSwitcherDeferred.bs");function j(a,c,d,e,f){f={entryPoint:a,onTabChange:c,selectedFolderTab:d};e!==void 0&&(f.xstyle=b("bs_caml_option").valFromOption(e));return f}function k(a){return h.createElement(b("deferredLoadComponentForReason")(i).make,a)}c={makeProps:j,make:k};function a(a){var b=a.entryPoint,c=a.onTabChange;a=a.selectedFolderTab;return h.jsx(k,j(b,c,a,void 0,void 0))}d=a;f.$MWInboxContextSwitcher$DeferredForDisplay=i;f.MWInboxContextSwitcherDeferredImpl=c;f.make=d}),null);
__d("MWInboxLeftRailHeader.bs",["cr:1774123"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1774123").make;f.$MWMDSInboxLeftRailHeader$OR$MWTetraInboxLeftRailHeader$requireCond=b("cr:1774123");f.make=a}),null);
__d("MWInboxLeftRail.bs",["fbt","CometErrorBoundary.re","CometPagelet.react","CometPlaceholder.react","CometRouteParams","CometScrollView.react","CometTransientDialogProvider.react","InteractionTracing","LS.bs","LSClearMessageSearchTable","LSClearTables","LSIssueMessageSearchQuery","LSMessageSearchType.bs","LSTransaction.bs","Locale","LsSystemFolder.bs","MAWUnsupportedBrowsersNuxWrapper.react","MWCMBlendedThreadListLazy.bs","MWChatContactsContainer.react","MWInboxActiveNowTrayContainer.bs","MWInboxContextSwitcherDeferred.bs","MWInboxContextSwitcherGlimmer.react","MWInboxLeftRailContentPlaceholder.react","MWInboxLeftRailHeader.bs","MWInboxLeftRailSearch.bs","MWInboxMessageRequestsRoot.bs","MWInboxNavigationHeaderWithBackButton.bs","MWInboxSelectedThread.bs","MWLSJewelLoadMoreThreads.bs","MWLeftRailComponent.react","MWMessageSearchResults.bs","MWPActor.bs","MWQuickPromotionThreadlistBannerContainer.react","MWRestrictedAccountsList.bs","MWText.react","MWThreadList.bs","MWThreadListNewMessage.bs","MWThreadListNewMessageState.bs","MessageRequestsBulkActionsContext.react","MessengerThreadlistFooterDesktopAppLink.bs","MessengerThreadlistFooterOpenInAppLink.bs","MessengerWebEntryPoint","Promise","bs_belt_Option","bs_caml","bs_caml_option","bs_curry","bs_int64","cr:1047","cr:3447","cr:3481","cr:4097","gkx","promiseDone","qex","qpl","react","recoverableViolation","requestAnimationFrame","stylex","useCurrentRoute","useDebounced","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("Locale").isRTL();c=b("cr:3481")==null?void 0:b("bs_caml_option").some(b("cr:3481"));var l={header:{"@media (max-width: 900px)":{display:"ahb00how"}},page:{position:"pmk7jnqg",opacity:"b5wmifdl",transitionDuration:"ms05siws",transitionProperty:"pnx7fd3z",transitionTimingFunction:"b7h9ocf4",width:"k4urcfbm",height:"datstx6m",display:"j83agx80",flexDirection:"cbu4d94t"},pageHidden:{visibility:"kr9hpln1"},pageVisible:{opacity:"pedkr2u6"},root:{backgroundColor:"hybvsw6c",borderEnd:"hop1g133",outline:"lzcic4wl",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7",width:"k4urcfbm",height:"datstx6m",minHeight:"dp1hu0rb"},rootWithAnimations:{transform:"h3qk65th",transitionDuration:"ms05siws",transitionProperty:"s48hqc9n",transitionTimingFunction:"b7h9ocf4"},infoBox:{marginTop:"qjjbsfad",marginEnd:"cxmmr5t8",marginBottom:"w0hvl6rk",marginStart:"hcukyx3x",paddingTop:"pybr56ya",paddingEnd:"oj5qckz4",paddingBottom:"f10w8fjw",paddingStart:"lb8aey2d"},messageRequestsContainer:{display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"d2edcug0"},messageRequestsBulkActionsButtons:{boxShadow:"usczdcwk"},threadListPagelet:{height:"datstx6m",display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},contextSwitcherGlimmer:{display:"j83agx80",minHeight:"rz7trki1",paddingEnd:"rz4wbd8a",paddingStart:"a8nywdso",paddingTop:"cxgpxx05",paddingBottom:"sj5x9vvc",width:"dq347cre"}},m=b("cr:4097")==null?void 0:b("bs_caml_option").some(b("cr:4097"));function n(a){var c=a.hidePage,d=a.info,e=a.parentThreadKey,f=a.title;a=a.entryPoint;var g=b("MWInboxSelectedThread.bs").useHook(void 0),h=j.useContext(b("MessageRequestsBulkActionsContext.react")),k=h.setIsBulkActionsEditMode;j.useEffect(function(){b("bs_curry")._1(k,!1)},[c]);h={parentThreadKey:e,onOpenMessageRequests:void 0,threadListMessagingEntrypoint:b("MessengerWebEntryPoint").INBOX,responsive:!0,lsEntryPoint:a,gridLabel:f};g!==void 0&&(h.selectedThreadKey=g);return j.jsxs(b("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[j.jsx(b("MWInboxNavigationHeaderWithBackButton.bs").make,{title:f,onReturn:c,entryPoint:a}),d!==void 0?j.jsx("div",{className:(i||(i=b("stylex")))(l.infoBox),children:j.jsx(b("MWText.react"),{color:"secondary",type:"body4",children:b("bs_caml_option").valFromOption(d)})}):null,j.jsx(b("MWThreadList.bs").make,h)]})}d={make:n};function o(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").mplace,title:g._(/*FBT_CALL*/"Marketplace"/*FBT_CALL*/),entryPoint:"inboxFolder"})}e={make:o};function p(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").jobs,title:g._(/*FBT_CALL*/"Jobs"/*FBT_CALL*/),entryPoint:"inboxFolder"})}var q={make:p};function r(a){var c=a.hidePage;a=a.interactionID;return j.jsx(b("MWInboxMessageRequestsRoot.bs").make,{hidePage:c,interactionID:a})}var s={make:r};function t(a){a=a.hidePage;var c=b("MWInboxSelectedThread.bs").useHook(void 0);return j.jsx(b("MWRestrictedAccountsList.bs").make,{hidePage:a,onClose:function(a){},selectedThreadKey:c})}var u={make:t};function v(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").archived,title:g._(/*FBT_CALL*/"Archived chats"/*FBT_CALL*/),entryPoint:"inboxArchived"})}var w={make:v};function x(a){a=a.hidePage;var c=b("MWInboxSelectedThread.bs").useHook(void 0),d={preventLocalNavigation:!1,showCount:!0,entryPoint:"inboxActiveContacts"};c=b("bs_belt_Option").map(c,b("bs_int64").to_string);c!==void 0&&(d.selectedThreadKey=c);return j.jsxs(b("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[j.jsx(b("MWInboxNavigationHeaderWithBackButton.bs").make,{title:g._(/*FBT_CALL*/"People"/*FBT_CALL*/),onReturn:a}),j.jsx(b("MWChatContactsContainer.react"),d)]})}var y={make:x};function z(a){var c=a.hidePage,d=a.query;a=a.setIsConversationSearchVisible;var e=b("useReStore")(),f=b("MWInboxSelectedThread.bs").useHook(void 0),g=j.useRef(!1),h=j.useCallback(function(a){if(!g.current){g.current=!0;b("promiseDone")(b("LSTransaction.bs").run(e,function(a){var c=b("LS.bs").make(a);return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").message,c).then(function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").thread,c)})},"readWrite"),c);return}},[e,c]);return j.jsx(b("MWMessageSearchResults.bs").make,{query:d,clearSearchResultsAndHidePage:h,selectedThreadKey:f,setIsConversationSearchVisible:a})}var A={make:z},B={},C=b("cr:3447")==null?function(a){}:b("cr:3447").useHook;function a(a){var c=a.setIsConversationSearchVisible,d=a.queries,e=b("MWPActor.bs").useActor(void 0),f=b("MWLSJewelLoadMoreThreads.bs").useHook(b("LsSystemFolder.bs").archived),h=b("MWInboxSelectedThread.bs").useHook(void 0);a=j.useState(function(){return!1});var n=a[1],q=a[0];a=j.useState(function(){return[]});var s=a[1];a=a[0];var u=j.useState(function(){return 0}),w=u[1],y=u[0];u=j.useState(function(){return""});var A=u[1],B=u[0];u=j.useCallback(function(a){return b("bs_curry")._1(n,function(a){return!1})},[]);var D=b("useReStore")(),E=b("useDebounced")(j.useCallback(function(a){b("requestAnimationFrame")(function(c){b("bs_curry")._1(n,function(a){return!0});return b("bs_curry")._1(w,function(c){b("bs_curry")._1(s,function(b){return b.slice(0,c).concat([a])});return c+1|0})})},[n,w,s]),350,!0),F=j.useCallback(function(a){b("requestAnimationFrame")(function(a){if(y<1){b("recoverableViolation")("Attempting to close a page that does not exist anymore.","messenger_comet");return}else{b("bs_curry")._1(n,function(a){return!0});return b("bs_curry")._1(w,function(a){return a-1|0})}})},[a,y,n,w]),G=j.useCallback(function(a){a=b("qpl")._(30607516,"756");a={interactionClass:"fast",qplEvent:a,tracePolicy:"comet.messenger.message_requests",traceType:"INTERACTION"};var c=b("InteractionTracing").startInteraction(a);b("bs_curry")._1(A,function(a){return c});return b("bs_curry")._1(E,r)},[E]),H=j.useCallback(function(a){return b("bs_curry")._1(E,t)},[E]),I=j.useCallback(function(a){if(b("bs_caml").i64_eq(a,b("LsSystemFolder.bs").jobs))return b("bs_curry")._1(E,p);else if(b("bs_caml").i64_eq(a,b("LsSystemFolder.bs").mplace))return b("bs_curry")._1(E,o);else{b("recoverableViolation")("Attempted to show an unimplemented nested system folder","messenger_web_product");return}},[E]),J=j.useCallback(function(a){f();return b("bs_curry")._1(E,v)},[f,E]),K=j.useCallback(function(a){return b("bs_curry")._1(E,x)},[E]),L=b("bs_curry")._1(C,E),M=j.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(D,function(c){var d=b("LS.bs").make(c);return b("LSClearTables")(d).then(function(c){return b("LSIssueMessageSearchQuery")(a,b("LSMessageSearchType.bs").thread,void 0,void 0,d)})},"readWrite").then(function(c){if(b("cr:1047")==null)return b("Promise").resolve(void 0);else return b("bs_curry")._3(b("cr:1047").searchSecureDatabaseThreads,a,e,D)}),function(d){b("bs_curry")._1(E,function(b){return z({hidePage:b.hidePage,query:a,setIsConversationSearchVisible:c})});return b("bs_curry")._1(c,function(a){return!0})},function(a){b("recoverableViolation")("Error performing search","messenger_web_product",{error:a.Error})})},[D,h,E,c,e]);j.useEffect(function(){return function(a){b("promiseDone")(b("LSTransaction.bs").run(D,function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").thread,b("LS.bs").make(a))},"readWrite"),void 0,void 0)}},[D]);var N=j.useContext(b("MWThreadListNewMessageState.bs").context),O=N.isActive?j.jsx(b("MWThreadListNewMessage.bs").make,{entries:N.entries}):null;N=j.useMemo(function(){return j.jsx(b("MWInboxLeftRailHeader.bs").make,{xstyle:b("bs_caml_option").some(l.header),showMessageRequests:G,showHidden:J,showActiveContacts:K,showRestrictedAccounts:H})},[G,J,K,H]);var P=b("CometRouteParams").useRouteParams(),Q=P.folder_id;P=j.useState(function(){if(Q==null)return b("LsSystemFolder.bs").inbox;else return b("LsSystemFolder.bs").community});var R=P[1],S=P[0],T=b("qex")._("837")===!0?j.jsx(b("CometPlaceholder.react"),{children:j.jsx(b("MWInboxContextSwitcherDeferred.bs").make,{entryPoint:b("MessengerWebEntryPoint").INBOX,onTabChange:function(a){return b("bs_curry")._1(R,function(b){return a})},selectedFolderTab:S}),fallback:j.jsx(b("MWInboxContextSwitcherGlimmer.react"),{xstyle:l.contextSwitcherGlimmer})}):null;P=j.useMemo(function(){var a={searchMessagesClicked:M,testid:"mw-search-bar"},c=L!==void 0?function(a){b("bs_curry")._1(L,a)}:void 0;c!==void 0&&(a.onSelectFreeformQuery=b("bs_caml_option").valFromOption(c));return j.jsxs(j.Fragment,{children:[j.jsx(b("MWInboxLeftRailSearch.bs").make,a),T,j.jsx(b("CometPlaceholder.react"),{children:j.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:j.jsx(b("MAWUnsupportedBrowsersNuxWrapper.react"),{children:j.jsx(b("MWQuickPromotionThreadlistBannerContainer.react"),{})})}),fallback:null})]})},[M,S,L]);var U=j.useCallback(function(a){},[]),V=g._(/*FBT_CALL*/"Chats"/*FBT_CALL*/),W=j.useState(function(){return!1}),X=W[1],Y=j.useMemo(function(){var a=d.actionNowTrayQueryRef;a=a!==void 0?j.jsx(b("MWInboxActiveNowTrayContainer.bs").make,{actionNowTrayQueryRef:b("bs_caml_option").valFromOption(a)}):null;var c=b("qex")._("837")===!0,e,f=0;if(c&&b("bs_caml").i64_eq(S,b("LsSystemFolder.bs").community)){c={gridLabel:V,header:a,lsEntryPoint:"inboxThreadList",messagingEntrypoint:b("MessengerWebEntryPoint").INBOX,responsive:!0,setHasScrolled:X};h!==void 0&&(c.selectedThreadKey=h);e=j.jsx(b("MWCMBlendedThreadListLazy.bs").make,c)}else f=1;if(f===1){c={parentThreadKey:S,header:a,onOpenMessageRequests:void 0,threadListMessagingEntrypoint:b("MessengerWebEntryPoint").INBOX,onClose:U,responsive:!0,preamble:O,lsEntryPoint:"inboxThreadList",onClickNestedFolderThread:I,gridLabel:V,setHasScrolled:X};h!==void 0&&(c.selectedThreadKey=h);e=j.jsx(b("MWThreadList.bs").make,c)}return j.jsx(b("CometPagelet.react").Placeholder,{fallback:j.jsx(b("MWInboxLeftRailContentPlaceholder.react"),{}),name:"MWThreadList",children:e,className:(i||(i=b("stylex")))(l.threadListPagelet)})},[O,h,I,S]);N=j.jsxs(j.Fragment,{children:[j.jsx("div",{style:{transform:"translateX("+(String(Math.imul(k?1:-1,y))+"00%) translateZ(1px)")},className:(i||(i=b("stylex")))(l.page,!q&&y!==0?l.pageHidden:!1,y===0?l.pageVisible:!1),children:j.jsx(b("MWLeftRailComponent.react"),{footer:b("gkx")("1817606")?j.createElement(b("MessengerThreadlistFooterDesktopAppLink.bs").make,{}):b("gkx")("1732")?j.createElement(b("MessengerThreadlistFooterOpenInAppLink.bs").make,{}):null,header:N,primaryNav:Y,search:P,preamble:b("cr:3481")==null?null:j.jsx(b("cr:3481").make,{}),hasScrolled:W[0]})}),a.map(function(a,c){return j.jsx("div",{style:{transform:"translateX("+(String(Math.imul(k?1:-1,(y-c|0)-1|0))+"00%) translateZ(1px)")},className:(i||(i=b("stylex")))(l.page,!q&&y!==(c+1|0)?l.pageHidden:!1,y===(c+1|0)?l.pageVisible:!1),children:j.createElement(a,{hidePage:F,pushPage:E,interactionID:B})},String(c))})]});var Z=b("useCurrentRoute")();j.useEffect(function(){!(Z==null)&&(Z.url==="/messages/requests"||Z.url==="/messages/filtered")&&b("bs_curry")._1(G,void 0)},[Z]);return j.jsx(b("CometTransientDialogProvider.react"),{children:j.jsx("div",{className:i(l.root,q?l.rootWithAnimations:!1),onTransitionEnd:u,children:b("cr:4097")==null?N:j.jsx(m.make,{children:N,activeIndex:y})})})}var D=b("cr:1047");a=a;f.$MWEncryptedBackupsThreadListNux$requireCond=b("cr:3481");f.mwEncryptedBackupsThreadListNux=c;f.styles=l;f.$MWThreadListKeyCommandContext$OR$null$requireCond=b("cr:4097");f.$MWInboxSecureContentSearch$requireCond=b("cr:1047");f.mWInboxSecureContentSearch=D;f.ThreadListPage=d;f.Marketplace=e;f.Jobs=q;f.MessageRequests=s;f.RestrictedAccounts=u;f.Hidden=w;f.ActiveContacts=y;f.ThreadSearchResults=A;f.MWInboxLeftRailContentPlaceholder=B;f.$UseMWLeftRailFullSearch$OR$null$requireCond=b("cr:3447");f.useMWLeftRailFullSearch=C;f.make=a}),null);
__d("MWInboxRoot.bs",["fbt","BaseHeadingContext","BaseRow.react","BaseRowItem.react","CometLeftRailLayoutContext","CometLeftRailPrimaryContext","CometPlaceholder.react","CometRouterFocusRegion.react","CurrentEnvironment","FBID.bs","LS.bs","LSClearMessageSearchTable","LSMessageSearchType.bs","LSTransaction.bs","MWInboxLeftRail.bs","MWInboxMaster.bs","MWInboxMasterView.bs","MWPActor.bs","MWSetupPresenceReportingDeferred.bs","MWThreadListNewMessageState.bs","MWUseGlobalMuteUntil.bs","MWVisibleMessageContext.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","cr:557","gkx","promiseDone","react","stylex","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");c={};d={Provider:c};e={};c={Provider:e};var k={container:{display:"j83agx80",flexGrow:"buofh1pr",minHeight:"dp1hu0rb",position:"l9j0dhe7",zIndex:"du4w35lb"},contentArea:{display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",minHeight:"dp1hu0rb",minWidth:"hpfvmrgz",position:"l9j0dhe7",zIndex:"du4w35lb"},leftRail:{flexShrink:"pfnyh3mw",minHeight:"dp1hu0rb",overflowAnchor:"rek2kq2y",width:"o36gj0jk",zIndex:"tkr6xdv7","@media (max-width: 900px)":{width:"g0mhvs5p"}},leftRailForMessengerDotCom:{"@media (max-width: 900px)":{width:"ezfq3ill"}},mainContent:{display:"j83agx80",minHeight:"dp1hu0rb"}};function l(a){var c=a.isConversationSearchVisible,d=a.setIsConversationSearchVisible,e=b("MWInboxMasterView.bs").useHook(void 0);a=b("usePrevious")(e);var f=a==null?void 0:b("bs_caml_option").some(a),g=b("useReStore")(),h=b("bs_belt_Option").isSome(b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(g.table("message_search_queries")),{hd:b("LSMessageSearchType.bs").thread,tl:0})},[g])));j.useEffect(function(){!h&&b("bs_caml_obj").caml_notequal(e,f)&&(b("bs_curry")._1(d,function(a){return!1}),b("promiseDone")(b("LSTransaction.bs").run(g,function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").message,b("LS.bs").make(a))},"readWrite"),void 0,void 0))},[e,h,g,d,f]);var l=b("MWPActor.bs").useActor(void 0),m=b("MWUseGlobalMuteUntil.bs").useGlobalMuteUntil(void 0);j.useEffect(function(){!(b("cr:557")==null)&&b("CurrentEnvironment").messengerdotcom&&b("bs_curry")._2(b("cr:557").updateMute,b("FBID.bs").ofStringExn(b("bs_int64").to_string(l)),b("bs_caml_int64").to_float(m))},[l,JSON.stringify(m)]);a=j.useContext(b("BaseHeadingContext"));return j.jsx("div",{className:(i||(i=b("stylex")))(k.contentArea),children:j.jsx(b("CometRouterFocusRegion.react"),{children:j.jsx(b("CometLeftRailLayoutContext").Provider,{value:!0,children:j.jsx(b("MWVisibleMessageContext.bs").Provider.make,{children:j.createElement(b("BaseHeadingContext").Provider,{value:a+1|0,children:j.jsx(j.Fragment,{children:j.jsx(b("MWInboxMaster.bs").make,{isConversationSearchVisible:c,setIsConversationSearchVisible:d})})})})})})})}e={make:l};function a(a){a=a.queries;var c=j.useState(function(){return!1}),d=c[1],e=b("MWInboxMasterView.bs").useHook(void 0),f;if(typeof e==="number")f="";else{e=e._0;f=e===0?g._(/*FBT_CALL*/"New message"/*FBT_CALL*/):""}e=j.jsx(b("MWThreadListNewMessageState.bs").Provider.make,{children:j.jsx(j.Fragment,{children:j.jsx(b("BaseRow.react"),{align:"start",children:j.jsxs(b("CometLeftRailPrimaryContext").Provider,{value:!1,children:[j.jsx(b("BaseRowItem.react"),{"aria-label":"",children:j.jsx(b("MWInboxLeftRail.bs").make,{setIsConversationSearchVisible:d,queries:a}),role:"navigation",xstyle:[k.leftRail,b("CurrentEnvironment").messengerdotcom&&b("gkx")("571")?k.leftRailForMessengerDotCom:!1]}),j.jsx(b("BaseRowItem.react"),{"aria-label":f,expanding:!0,children:j.jsx(b("CometPlaceholder.react"),{children:j.jsx(l,{isConversationSearchVisible:c[0],setIsConversationSearchVisible:d}),fallback:null}),role:"main",xstyle:[k.mainContent]})]}),xstyle:[k.container]})})});return j.jsxs(j.Fragment,{children:[j.jsx(b("MWSetupPresenceReportingDeferred.bs").make,{}),e]})}a=a;f.CometLeftRailPrimaryContext=d;f.CometLeftRailLayoutContext=c;f.styles=k;f.$MessengerNotificationsWriter$requireCond=b("cr:557");f.Content=e;f.make=a}),null);
__d("MWInboxRoot.re",["MWInboxRoot.bs"],(function(a,b,c,d,e,f){a=b("MWInboxRoot.bs").Content.make;f.Content_make=a;c=b("MWInboxRoot.bs").make;f.make=c;d=b("MWInboxRoot.bs").Content;f.Content=d}),null);
__d("MWLSInbox.react",["CometErrorBoundary.react","FBLogger","LSPlatformClientProviderWithDeferredLoadingStrategy.re","LSPlatformConfig.re","LSPlatformMessengerConfig.re","MWInbox.re","MWInboxPlaceholder.react","MWInboxRoot.re","cr:1619","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferred")("MWUncaughtErrorState.react").__setRef("MWLSInbox.react")),j=function(a){return h.jsx(i,{error:a})},k=function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("uncaught exception in MWLSInbox. Error:"+a.message)};function a(a){var e,f=a.props.routeProps;a=a.queries;return h.jsxs(h.Fragment,{children:[h.jsx(c("CometErrorBoundary.react"),{fallback:j,onError:k,children:h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.re").configEagerlyLoaded,children:h.jsx(d("LSPlatformClientProviderWithDeferredLoadingStrategy.re").make,{placeholder:h.jsx(d("MWInboxPlaceholder.react").MWInboxPlaceholder,{}),children:h.jsx(d("MWInbox.re").make,{queries:a,refParam:(e=f.ref_param)!=null?e:void 0,threadKey:(e=f.thread_key)!=null?e:void 0,children:h.jsx(d("MWInboxRoot.re").make,{queries:a})})})})}),h.jsx(c("CometErrorBoundary.react"),{children:b("cr:1619")?h.jsx(b("cr:1619"),{}):null})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSSetMessengerRestrict",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.fe(c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}),function(b){var c=b.update;b.item;return c({pendingMessengerRestrictAction:a[1]})})},function(e){return d[0]=new c.Map(),d[0].set("restrictee_id",a[0]),d[0].set("request_id",a[2]),d[0].set("messenger_restrict_action",a[1]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"messenger_restrict",[0,367],d[1],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateThreadImage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.threadType,[0,2])}),function(b){var c=b.update;b.item;return c({authorityLevel:[0,60],threadPictureUrl:a[2]===""?f:a[2],threadPictureUrlFallback:a[3],threadPictureUrlExpirationTimestampMs:a[4]})})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=[0,1]:(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],f)?d[4]=d[5]:d[4]=[0,1],d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("image_id",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),"thread_image",[0,37],d[3],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWInboxInfoBlockMessages.bs",["fbt","CometLazyDialogTrigger.react","FBID.bs","JSResourceForInteraction","LSContactBlockedByViewerStatus.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.thread,d=a.contactId,e=a.children,f=a.loggingEntryPoint,h=a.loggingSource;a=a.loggingSourceOwner;var j=b("useReStore")(),k=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(j.table("contacts")),{hd:d,tl:0})},[j,JSON.stringify(d)])),l=k!==void 0?b("bs_caml").i64_eq(k.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").messageBlocked):!1,m=k!==void 0?b("bs_caml").i64_eq(k.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").fullyBlocked):!1,n=l||m?g._(/*FBT_CALL*/"Unblock"/*FBT_CALL*/):g._(/*FBT_CALL*/"Block"/*FBT_CALL*/),o=i.useRef(null);if(k!==void 0)return i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResourceForInteraction")("MWChatBlockActionDialog",{name:"MWChatBlockActionDialog","class":"fluid"}).__setRef("MWInboxInfoBlockMessages.bs"),dialogProps:{thread:c,targetFBID:b("FBID.bs").ofStringExn(b("bs_int64").to_string(d)),onClose:function(a){},loggingData:{entryPoint:f,requestId:void 0,source:h,sourceOwner:a}},children:function(a){return b("bs_curry")._4(e,a,o,n,l||m)}});else return null}c=a;f.make=c}),null);
__d("MAWInboxInfoButton.bs",["MDSListCell.react","MDSTextPairing.react","MWText.react","bs_caml_option","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={addOnStartContained:{backgroundColor:"tdjehn4e",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",height:"mudddibn",minWidth:"pa2m88jb",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t"}},k=b("gkx")("571")&&b("gkx")("1968579")?"contained":"normal";a=i.forwardRef(function(a,c){var d=a.addOnStart,e=a.addOnStartStyle,f=a.subLabel,g=a.label,l=a.onPress,m=a.testid,n=a.disabled;a=a.linkProps;e=e!==void 0?e:k;n=n!==void 0?n:!1;if(d!==void 0){d=b("bs_caml_option").valFromOption(d);e=e==="contained"?i.jsx("div",{className:(h||(h=b("stylex")))(j.addOnStartContained),children:d}):d}else e=null;d={headline:i.jsx(b("MWText.react"),{type:"headline4",children:g}),level:4};g=f!==void 0?b("bs_caml_option").some(i.jsx(b("MWText.react"),{type:"meta3",children:f})):void 0;g!==void 0&&(d.meta=b("bs_caml_option").valFromOption(g));f={addOnStart:e,addOnStartVerticalAlign:"top",content:i.jsx(i.Fragment,{children:i.jsx(b("MDSTextPairing.react"),d)}),disabled:n,size:"medium"};m!==void 0&&(f.testid=m);l!==void 0&&(f.onPress=b("bs_caml_option").valFromOption(l));a!==void 0&&(f.linkProps=b("bs_caml_option").valFromOption(a));g=c==null?void 0:b("bs_caml_option").some(c);g!==void 0&&(f.ref=b("bs_caml_option").valFromOption(g));return i.jsx(b("MDSListCell.react"),f)});f.styles=j;f.defaultAddOnStartStyle=k;f.make=a}),null);
__d("MWRestrictDialogActionToggle.react",["nux:89","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=b("nux:89")==null?void 0:b("nux:89")("web_msgr_restrict_first_time_nux");function a(a){var b=a.children;a=a.dialogProps;if(i!=null&&!a.isRestricted)return h.jsx(i,{dialogProps:a,children:function(a,c){return b(a)}});else return b(a.onPress)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LsMessengerThreadDamagingActionsSourceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];f.$$default=a;f["default"]=a;f.__esModule=!0;f.gxac=c;f.cmsg=d}),null);
__d("MWMessengerResetBlockOrRestrictWC.bs",["Promise","ReQL.bs","UseBlockedUserInterstitial.bs","WebStorage.bs","bs_caml","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("WebStorage.bs").getLocalStorage(void 0);if(c===void 0)return;a=a.then(function(a){a.forEach(function(a){a=b("UseBlockedUserInterstitial.bs").getWarningCardStorageKey(a);return c.removeItem(a)});return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)}function a(a){var c=b("useReStore")();return h.useMemo(function(){return function(a){var d;return i((d=b("ReQL.bs")).toArray(d.map(d.filter(d.fromTableAscending(c.table("participants")),function(c){return b("bs_caml").i64_eq(c.contactId,a)}),function(a){return a.threadKey})))}},[c])}f.clearStoredWarningCardFlags=i;f.useHook=a}),null);
__d("MWLSMessengerRestrict.bs",["FBID.bs","LS.bs","LSContactMessengerRestrictAction.bs","LSMessagingThreadTypeUtil.bs","LSSetMessengerRestrict","LSTransaction.bs","LsMessengerThreadDamagingActionsSource","LsMessengerThreadDamagingActionsSourceOwner","LsMessengerThreadDamagingActionsSourceType.bs","LsThreadType.bs","MWMessengerResetBlockOrRestrictWC.bs","bs_caml","bs_caml_int64","bs_curry","bs_int64","cr:3323","promiseDone","react","requireDeferred","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MessengerWellbeingRestrictSucceededFalcoEvent.bs").__setRef("MWLSMessengerRestrict.bs"),j=b("requireDeferred")("MessengerWellbeingUnrestrictSucceededFalcoEvent.bs").__setRef("MWLSMessengerRestrict.bs");function k(a,c,d,e,f,g){var h=d!==void 0?b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType):!1;d=d!==void 0?b("bs_caml").i64_eq(d.threadType,b("LsThreadType.bs").secureMessageOverWaOneToOne):!1;var k=d?b("LsMessengerThreadDamagingActionsSource").SECURE_OVER_WA_CANONICAL:b("LsMessengerThreadDamagingActionsSource").CANONICAL_THREAD;a===b("LSContactMessengerRestrictAction.bs").unrestrict?j.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:k,entry_point:b("bs_caml_int64").to_int32(g),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:f,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:h?"-1":b("bs_int64").to_string(e)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c))}}})}):i.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:k,entry_point:b("bs_caml_int64").to_int32(g),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:f,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:h?"-1":b("bs_int64").to_string(e)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c))}}})})}var l=b("requireDeferred")("MessengerWellbeingRestrictFailedFalcoEvent.bs").__setRef("MWLSMessengerRestrict.bs"),m=b("requireDeferred")("MessengerWellbeingUnrestrictFailedFalcoEvent.bs").__setRef("MWLSMessengerRestrict.bs");function n(a,c,d,e,f,g){var h=d!==void 0?b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType):!1;d=d!==void 0?b("bs_caml").i64_eq(d.threadType,b("LsThreadType.bs").secureMessageOverWaOneToOne):!1;var i=d?b("LsMessengerThreadDamagingActionsSource").SECURE_OVER_WA_CANONICAL:b("LsMessengerThreadDamagingActionsSource").CANONICAL_THREAD;a===b("LSContactMessengerRestrictAction.bs").unrestrict?m.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:i,entry_point:b("bs_caml_int64").to_int32(g),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:f,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:h?"-1":b("bs_int64").to_string(e)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c))}}})}):l.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:i,entry_point:b("bs_caml_int64").to_int32(g),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:f,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:h?"-1":b("bs_int64").to_string(e)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c))}}})})}function a(a,c,d,e,f){var g=b("useReStore")(),i=b("cr:3323")==null?function(a,b){}:b("bs_curry")._1(b("cr:3323").useHook,void 0),j=b("MWMessengerResetBlockOrRestrictWC.bs").useHook(void 0);return h.useCallback(function(h){b("promiseDone")(b("LSTransaction.bs").run(g,function(c){return b("LSSetMessengerRestrict")(a,h,e,b("LS.bs").make(c))},"readWrite"),function(g){b("bs_curry")._2(i,a,h);b("bs_curry")._1(j,a);return k(h,a,c,d,e,f)},function(b){return n(h,a,c,d,e,f)})},[g,JSON.stringify(a),JSON.stringify(d),e,f])}f.$MessengerWellbeingRestrictSucceededFalcoEvent$Deferred=i;f.$MessengerWellbeingUnrestrictSucceededFalcoEvent$Deferred=j;f.logRestrictOrUnrestrictSuccess=k;f.$MessengerWellbeingRestrictFailedFalcoEvent$Deferred=l;f.$MessengerWellbeingUnrestrictFailedFalcoEvent$Deferred=m;f.logRestrictOrUnrestrictFailure=n;f.$MAWMessengerRestrictUtils$requireCondXplat=b("cr:3323");f.useHook=a}),null);
__d("UseMWRestrictContactOneOnOneThread.bs",["CurrentEnvironment","FBID.bs","LSContactMessengerRestrictAction.bs","LSMessagingThreadTypeUtil.bs","LsMessengerThreadDamagingActionsSource","LsMessengerThreadDamagingActionsSourceOwner","LsMessengerThreadDamagingActionsSourceType.bs","LsThreadType.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWLSMessengerRestrict.bs","MWLSThreadDisplayContext.bs","bs_caml","bs_caml_int64","bs_curry","bs_int64","requireDeferred","useCometRouterDispatcher","uuid"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("MessengerWellbeingRestrictTappedFalcoEvent.bs").__setRef("UseMWRestrictContactOneOnOneThread.bs"),h=b("requireDeferred")("MessengerWellbeingUnrestrictTappedFalcoEvent.bs").__setRef("UseMWRestrictContactOneOnOneThread.bs");function i(a,c,d,e,f,i){var j=e!==void 0?b("LSMessagingThreadTypeUtil.bs").isSecure(e.threadType):!1;e=e!==void 0?b("bs_caml").i64_eq(e.threadType,b("LsThreadType.bs").secureMessageOverWaOneToOne):!1;var k=e?b("LsMessengerThreadDamagingActionsSource").SECURE_OVER_WA_CANONICAL:b("LsMessengerThreadDamagingActionsSource").CANONICAL_THREAD;a?h.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:k,entry_point:b("bs_caml_int64").to_int32(i),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:c,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:j?"-1":b("bs_int64").to_string(f)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(d))}}})}):g.onReady(function(a){return b("bs_curry")._1(a.log,function(){return{data:{source:k,entry_point:b("bs_caml_int64").to_int32(i),source_owner:b("LsMessengerThreadDamagingActionsSourceOwner").MCI,request_id:c,source_type:b("LsMessengerThreadDamagingActionsSourceType.bs").$$default},thread:{id:j?"-1":b("bs_int64").to_string(f)},other_user:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(d))}}})})}function a(a,c,d,e,f){var g=b("uuid")(),h=b("MWLSMessengerRestrict.bs").useHook(a,c,d,g,e),j=b("useCometRouterDispatcher")(),k=b("MWLSThreadDisplayContext.bs").useHook(void 0),l=b("MWChatStateV2.bs").useDispatch(void 0);return function(m){i(f,g,a,c,d,e);b("bs_curry")._1(h,f?b("LSContactMessengerRestrictAction.bs").unrestrict:b("LSContactMessengerRestrictAction.bs").restrict);!f&&k==="Inbox"&&!(j==null)&&j.go(b("CurrentEnvironment").messengerdotcom?"/":"/messages");if(!f)return b("bs_curry")._1(l,b("MWChatStateActions.bs").closeTabByThreadKey(Date.now(),d))}}f.$MessengerWellbeingRestrictTappedFalcoEvent$Deferred=g;f.$MessengerWellbeingUnrestrictTappedFalcoEvent$Deferred=h;f.logRestrictOrUnrestrictTapped=i;f.useHook=a}),null);
__d("MWInboxInfoMessengerRestrict.bs",["fbt","ix","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSContactMessengerRestrictAction.bs","MAWInboxInfoButton.bs","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","MWMenuItem.react","MWRestrictDialogActionToggle.react","ReQL.bs","ReQLSubscription.bs","TetraButton.react","UseMWRestrictContactOneOnOneThread.bs","bs_belt_Option","bs_curry","fbicon","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");function k(a){var c=a.buttonSource,d=a.isPendingState,e=a.buttonTitle,f=a.onPress;a=j.useCallback(function(a){return b("bs_curry")._1(f,void 0)},[f]);switch(c){case"CHAT_TAB_SETTINGS":return j.jsx(b("MWMenuItem.react"),{primaryText:e,onClick:a,icon:b("fbicon")._(h("995804"),20),disabled:d,testid:"mw_restrict_messages_button"});case"RESTRICT_COMPOSER":return j.jsx(b("TetraButton.react"),{disabled:d,label:e,type:"secondary",onPress:a});default:return j.jsx(b("MAWInboxInfoButton.bs").make,{addOnStart:j.jsx(b("MWIcon.react"),{icon:d?b("MWInboxInfoPrivacyAndSupportSectionIcons.bs").RestrictMessagesPendingState.icon:b("MWInboxInfoPrivacyAndSupportSectionIcons.bs").RestrictMessages.icon}),label:e,onPress:a,testid:"mw_restrict_messages_button",disabled:d})}}c={make:k};function a(a){var c=a.contactId,d=a.thread,e=a.threadKey,f=a.loggingEntryPoint,h=a.buttonSource,i=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(i.table("contacts")),{hd:c,tl:0})},[JSON.stringify(c),i]));var l=b("bs_belt_Option").mapWithDefault(a,!1,function(a){return b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").restrictPlaced,a),!1)}),m=b("bs_belt_Option").mapWithDefault(b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(i.table("contacts")),{hd:c,tl:0})},[JSON.stringify(c),i])),[0,10],function(a){a=a.pendingMessengerRestrictAction;if(a!==void 0)return a;else return[0,10]}),n=m===b("LSContactMessengerRestrictAction.bs").restrict||m===b("LSContactMessengerRestrictAction.bs").unrestrict,o=h==="RESTRICT_COMPOSER"?g._(/*FBT_CALL*/"Unrestrict"/*FBT_CALL*/):l?g._(/*FBT_CALL*/"Unrestrict"/*FBT_CALL*/):g._(/*FBT_CALL*/"Restrict"/*FBT_CALL*/);m=m===b("LSContactMessengerRestrictAction.bs").unrestrict?g._(/*FBT_CALL*/"Unrestricting..."/*FBT_CALL*/):g._(/*FBT_CALL*/"Restricting\u2026"/*FBT_CALL*/);d=b("UseMWRestrictContactOneOnOneThread.bs").useHook(c,d,e,f,l);var p=n?m:o;if(a!==void 0)return j.jsx(b("MWRestrictDialogActionToggle.react"),{dialogProps:{restrictedUser:a,onPress:d,isRestricted:l},children:function(a){return j.jsx(k,{buttonSource:h,isPendingState:n,buttonTitle:p,onPress:a})}});else return null}d=a;f.RestrictButton=c;f.make=d}),null);
__d("MWRestrictFirstTimeNux.react",["CometLazyDialogTrigger.react","JSResourceForInteraction","declareNUXRequireable","react","useNUX"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useMemo,j=b.useRef,k=c("JSResourceForInteraction")("MWRestrictFirstTimeNuxDialog.react").__setRef("MWRestrictFirstTimeNux.react");function a(a){var b=j(null);return function(d){var e=d.children,f=d.dialogProps;d=c("useNUX")(a);var g=d[0],j=d[1];d=i(function(){return{onPress:function(){f.onPress(),j.onDismiss()},restrictedUser:f.restrictedUser}},[f,j]);return g?h.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:d,dialogResource:k,children:function(a){return e(a,b)}}):e(f.onPress)}}e=c("declareNUXRequireable")(a);g["default"]=e}),98);
__d("MessengerRestrictButtonSource.bs",[],(function(a,b,c,d,e,f){"use strict";a="THREAD_DETAIL_SETTINGS";b="RESTRICT_COMPOSER";c="CHAT_TAB_SETTINGS";f.thread_detail_settings=a;f.restrict_composer=b;f.chat_tab_settings=c}),null);
__d("MWInboxInfoActionsSectionIcons.bs",["cr:1724557"],(function(a,b,c,d,e,f){"use strict";c=(a=b("cr:1724557")).EditNicknames;d=a.ChangeChatName;e=a.ChangePhoto;b=a.Search;var g=a.LeaveChat;f.$MDSInboxInfoActionsSectionIcons$OR$TetraInboxInfoActionsSectionIcons$requireCond=a;f.EditNicknames=c;f.ChangeChatName=d;f.ChangePhoto=e;f.Search=b;f.LeaveChat=g}),null);
__d("TetraInboxInfoActionsSectionIcons.bs",["ix","fbicon"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("fbicon"))._(g("603566"),20);d="primary";e={alt:void 0,"aria-label":void 0,"aria-labelledby":void 0,disabled:void 0,icon:c,onPress:void 0,onHoverIn:void 0,onHoverOut:void 0,testid:void 0,color:d,ref:void 0,size:void 0,linkProps:void 0,type:"icon"};b={icon:c,primaryAddOn:e};d=a._(g("477831"),20);c="primary";e={alt:void 0,"aria-label":void 0,"aria-labelledby":void 0,disabled:void 0,icon:d,onPress:void 0,onHoverIn:void 0,onHoverOut:void 0,testid:void 0,color:c,ref:void 0,size:void 0,linkProps:void 0,type:"icon"};c={icon:d,primaryAddOn:e};d=a._(g("540023"),20);e="primary";e={alt:void 0,"aria-label":void 0,"aria-labelledby":void 0,disabled:void 0,icon:d,onPress:void 0,onHoverIn:void 0,onHoverOut:void 0,testid:void 0,color:e,ref:void 0,size:void 0,linkProps:void 0,type:"icon"};d={icon:d,primaryAddOn:e};e=a._(g("491286"),20);var h="primary";h={alt:void 0,"aria-label":void 0,"aria-labelledby":void 0,disabled:void 0,icon:e,onPress:void 0,onHoverIn:void 0,onHoverOut:void 0,testid:void 0,color:h,ref:void 0,size:void 0,linkProps:void 0,type:"icon"};e={icon:e,primaryAddOn:h};h=a._(g("538183"),20);a="primary";g={alt:void 0,"aria-label":void 0,"aria-labelledby":void 0,disabled:void 0,icon:h,onPress:void 0,onHoverIn:void 0,onHoverOut:void 0,testid:void 0,color:a,ref:void 0,size:void 0,linkProps:void 0,type:"icon"};a={icon:h,primaryAddOn:g};f.EditNicknames=b;f.ChangeChatName=c;f.ChangePhoto=d;f.Search=e;f.LeaveChat=a}),null);
__d("MWV2EditPhotoUploader.bs",["fbt","CometFileSelector.re","DTSG","LS.bs","LSTransaction.bs","LSUpdateThreadImage","Promise","bs_belt_Array","bs_belt_Option","bs_caml_option","bs_curry","cometAsyncFetch","cometPushToast","promiseDone","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");g._(/*FBT_CALL*/"Change Photo"/*FBT_CALL*/);function a(a){var c=a.thread;a=a.children;var d=b("useReStore")(),e=i.useCallback(function(a){return function(e){var f=b("LSTransaction.bs").run(d,function(d){return b("LSUpdateThreadImage")(c.threadKey,a,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,void 0,void 0,b("LS.bs").make(d))},"readWrite");b("promiseDone")(f,void 0,void 0)}},[d,JSON.stringify(c.threadKey)]),f=function(a){b("cometPushToast").cometPushErrorToast({message:"Unable to set group picture"})},g=function(a){a=a.item(0);if(a==null){b("recoverableViolation")("file input onChange without any files?","messenger");return f(void 0)}var c=new FormData();c.set("images_only",!0);c.set("fb_dtsg",b("DTSG").getToken());c.set("attachment[]",a,a.name);a=b("cometAsyncFetch")("/ajax/mercury/upload.php",{method:"POST",data:{},formData:c}).then(function(a){a=b("bs_belt_Option").map(b("bs_belt_Array").get(b("bs_belt_Option").mapWithDefault(a==null?void 0:b("bs_caml_option").some(a),[],function(a){return a.metadata}),0),function(a){return[a.image_id,a.src]});a!==void 0?b("bs_curry")._2(e,a[0],a[1]):f(void 0);return b("Promise").resolve(void 0)})["catch"](function(a){f(void 0);b("recoverableViolation")(a.toString(),"messenger");return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)};return i.jsx(b("CometFileSelector.re").make,{accept:[".jpg",".png",".jpeg",".bmp",".tif",".tiff"],children:b("bs_curry").__1(a),onFilesSelected:g})}c=a;f.make=c}),null);
__d("MWColorWheelIcon.bs",["CometSVGIcon.react","MWPColorUtils.bs","MWPThreadTheme.bs","bs_caml_array","bs_caml_int32","bs_int64","gkx","react","useCometUniqueID","useSetAttributeRef"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("gkx")("571")?"24":"20",j=b("gkx")("571")?"8":"10";function a(a){a=b("MWPThreadTheme.bs").useHook(void 0);var c=a.threadTheme,d=a.gradientColors.sort(function(a,c){return b("bs_int64").compare(a.gradientIndex,c.gradientIndex)}).map(function(a){return b("MWPColorUtils.bs").int64ToHex(a.color)});d.length===0&&d.push(b("MWPColorUtils.bs").int64ToHex(c.fallbackColor));d.length===1&&d.push(b("bs_caml_array").get(d,0));a=h.jsx("linearGradient",{gradientTransform:"rotate(90)",children:d.map(function(a,c){var e=b("bs_caml_int32").div(100,d.length-1|0);e=String(Math.imul(c,e))+"%";return h.jsx("stop",{stopColor:a,offset:e},String(c))})});var e=b("useCometUniqueID")(),f=b("useSetAttributeRef")("id",e);e=b("useSetAttributeRef")("mask","url(#"+e+")");c="mw_edit_theme_svg:"+c.accessibilityLabel;return h.jsxs(b("CometSVGIcon.react"),{color:a,children:[h.jsx("defs",{children:h.jsxs("mask",{ref:f,children:[h.jsx("rect",{width:"100%",height:"100%",fill:"white"}),h.jsx("circle",{cx:"10",cy:"10",r:"3",fill:"black"})]})}),h.jsx("circle",{cx:"10",cy:"10",r:j,ref:e})],size:i,viewBox:"0 0 20 20","data-testid":c})}c=a;f.make=c}),null);
__d("LsIgnoreTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("707");c=b("FalcoLoggerInternal").create("ls_ignore_tapped",a);e.exports=c}),null);/*FB_PKG_DELIM*/
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(f){return c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),c.i64.of_float(Date.now())).then(function(a){return a=a,d[0]=a[0],a})},function(a){return d[1]=[64,1083495711],d[2]=[0,0],d[3]=[0,0],c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.fe(c.ftr(c.db.table(9).fetch([[[d[0]]]]),function(a){return c.i64.eq(a.threadKey,d[0])&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[0],mailboxType:[0,0],threadType:[0,2],clientThreadKey:d[0],folderName:"inbox",parentThreadKey:[0,0],lastActivityTimestampMs:[0,0],lastReadWatermarkTimestampMs:[0,0],snippetHasEmoji:!1,snippetSenderContactId:d[4],ongoingCallState:[0,0],authorityLevel:[0,20],capabilities:d[1],capabilities2:d[2],capabilities3:d[3],nullstateDescriptionText1:a[1],threadName:a[2]})},function(e){return d[5]=c.i64.of_int32(a[0].length),c.i64.gt(d[5],[0,0])?c.loopAsync(d[5],function(e){return d[6]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[0],d[6]).then(function(a){return a=a,d[7]=a[0],d[8]=a[1],a})},function(a){return c.fe(c.ftr(c.db.table(14).fetch([[[d[0],d[7]]]]),function(a){return c.i64.eq(a.threadKey,d[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(a.contactId,d[7])&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[0],contactId:d[7],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,20],isModerator:!1})}])}):c.resolve()},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalCreateOptimisticGroupThread",["LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticGroupThread"),a[0],a[1],f).then(function(a){return a=a,d[0]=a[0],a})},function(e){return a[2]===!0?(d[1]=new c.Map(),d[1].set("participants",a[0]),d[1].set("client_thread_key",d[0]),d[1].set("sync_group",[0,1]),d[2]=d[1].get("client_thread_key"),d[1],d[3]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[2]),[0,153],d[3],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWSwitch.react",["cr:1925","cr:1926","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var c=a.icon,d=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,["icon","size"]);if(b("cr:1925"))return h.jsx(b("cr:1925"),babelHelpers["extends"]({},a,{icon:c,size:d}));return b("cr:1926")?h.jsx(b("cr:1926"),babelHelpers["extends"]({},a)):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSParticipantDetails.bs",["GenderConst","LSContactGender.bs","LSContactReachabilityStatusType.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml","bs_caml_format","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}),function(a){return a.name})},[a,c]))}function c(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}),function(a){return b("bs_belt_Option").getWithDefault(a.firstName,a.name)})},[a,c]))}function d(a){var c=b("useReStore")();return b("bs_belt_Option").getWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}),function(a){return a.secondaryName})},[a,c])),void 0)}function e(a){var c=b("useReStore")();return b("bs_belt_Option").getWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}),function(a){var c=a.gender,d=a.firstName;d=d!==void 0?d:a.name;a=b("bs_caml").i64_eq(c,b("LSContactGender.bs").female)?b("GenderConst").FEMALE_SINGULAR:b("bs_caml").i64_eq(c,b("LSContactGender.bs").male)?b("GenderConst").MALE_SINGULAR:b("bs_caml").i64_eq(c,b("LSContactGender.bs").neuter)?b("GenderConst").NEUTER_SINGULAR:b("GenderConst").NOT_A_PERSON;return[d,a]})},[a,c])),void 0)}function i(a){var c=b("useReStore")();return b("bs_belt_Option").getWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}),function(a){a=a.contactReachabilityStatusType;if(a!==void 0)return b("bs_caml").i64_eq(b("LSContactReachabilityStatusType.bs").reachable,a);else return!0})},[a,c])),!0)}f.useParticipantName=a;f.useParticipantShortName=c;f.useParticipantSecondaryName=d;f.useNameAndGender=e;f.useParticipantReachabilityStatus=i}),null);
__d("MWUIParticipantDetails.bs",["cr:607"],(function(a,b,c,d,e,f){"use strict";c=(a=b("cr:607")).useParticipantName;d=a.useParticipantShortName;e=a.useParticipantSecondaryName;b=a.useNameAndGender;var g=a.useParticipantReachabilityStatus;f.$MWLSParticipantDetails$OR$WorkplaceMSParticipantDetails$requireCond=a;f.useParticipantName=c;f.useParticipantShortName=d;f.useParticipantSecondaryName=e;f.useNameAndGender=b;f.useParticipantReachabilityStatus=g}),null);
__d("MWPThreadPreview.bs",["LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSDatabaseType.bs","LSLocalCreateOptimisticGroupThread","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","LSVec","LSVerifyContactRowExists","LSVerifyThreadRowExists","MWPActor.bs","MWPThreadTheme.bs","MWThreadKey.bs","MessagingThreadType.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","bs_belt_Option","bs_caml","bs_caml_array","bs_caml_option","bs_curry","bs_int64","cr:2891","promiseDone","react","recoverableViolation","stylex","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",minHeight:"tgvbjcpo",fontSize:"jq4qci2q"},preview:{flexGrow:"buofh1pr",minHeight:"tgvbjcpo",display:"j83agx80",flexDirection:"cbu4d94t"},composer:{minHeight:"pxsmfnpt",flexShrink:"pfnyh3mw"}};function k(a){var c=b("useReStore")();i.useEffect(function(){b("LSTransaction.bs").run(c,function(c){return b("Promise").all(a.map(function(a){return b("LSVerifyContactRowExists")(a.id,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,!1,b("LSAuthorityLevel.bs").clientPartial,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(c))}))},"readWrite")},[c,JSON.stringify(a.map(function(a){return b("bs_int64").to_string(a.id)}))])}function l(a){var c=a.thread,d=a.renderThreadView,e=a.renderThreadPreview;a=a.children;if(e!==void 0)return b("bs_curry")._2(e,c,a);else return i.jsx(b("MWThreadKey.bs").make,{id:c.threadKey,children:i.jsxs("div",{className:(h||(h=b("stylex")))(j.container),children:[i.jsx("div",{className:h(j.preview),children:i.jsx(b("MWPThreadTheme.bs").make,{themeFbid:c.themeFbid,children:b("bs_curry")._1(d,c)})}),i.jsx("div",{className:h(j.composer),children:a})]})})}c={make:l};function m(a){var c=a.recipientToken,d=a.setPreviewThread,e=a.renderThreadView,f=a.renderThreadPreview;a=a.children;var g=b("useReStore")(),h=c.threadType,j=c.id;k([c]);i.useEffect(function(){b("promiseDone")(b("LSTransaction.bs").run(g,function(a){return b("LSVerifyThreadRowExists")(j,h,b("LSDatabaseType.bs").mailbox,b("LS.bs").make(a))},"readWrite"),void 0,void 0)},[g,b("bs_int64").to_string(j),JSON.stringify(h)]);var m=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(g.table("threads")),{hd:j,tl:0})},[g,j]));i.useEffect(function(){b("bs_curry")._1(d,function(a){return m})},[m]);if(m!==void 0)return i.jsx(l,{thread:m,renderThreadView:e,renderThreadPreview:f,children:a});else return null}d={make:m};function n(a,c,d,e){var f=b("useReStore")(),g=b("bs_int64").to_string(b("MWPActor.bs").useActor(void 0)),h=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(f.table("participants")),function(a){return c.has(b("bs_int64").to_string(a.contactId))}),function(a){return b("bs_int64").to_string(a.threadKey)})},[f,c]));return b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a,d=new Set(h);return(a=b("ReQL.bs")).filter(a.filter(a.filter(a.filter(a.fromTableAscending(f.table("threads")),function(a){return b("bs_caml").i64_eq(a.threadType,e)}),function(a){return a.threadName===void 0}),function(a){a=a.clientThreadKey;if(a!==void 0)return d.has(b("bs_int64").to_string(a));else return!1}),function(a){a=a.clientThreadKey;if(a===void 0)return!1;a=b("ReQLSuspense").toArray(b("ReQL.bs").filter(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexDescending(f.table("participants").index("threadKeyReadWatermarkTimestampMs")),{hd:a,tl:0}),function(a){return b("bs_int64").to_string(a.contactId)}),function(a){return a!==g}));if(a.every(function(a){return c.has(a)}))return a.length===c.size;else return!1})},[f,h,c,g,JSON.stringify(e)]))}function o(a,c,d,e){var f=b("useReStore")();i.useEffect(function(){a===void 0&&b("promiseDone")(b("LSTransaction.bs").run(f,function(a){if(b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").group))return b("LSLocalCreateOptimisticGroupThread")(b("LSVec").make(d.map(function(a){return a.id})),void 0,e,b("LS.bs").make(a)).then(function(a){});else if(b("LSMessagingThreadTypeUtil.bs").isSecure(c))if(b("cr:2891")==null)return b("Promise").resolve(void 0);else return b("bs_curry")._3(b("cr:2891").call,a,d,c).then(function(a){});else{b("recoverableViolation")("Don't know how to create optimistic thread for thread of thread type"+b("bs_belt_Option").getWithDefault(JSON.stringify(c),""),"messenger_web_product");return b("Promise").resolve(void 0)}},"readWrite"),void 0,void 0)},[f,d,JSON.stringify(a),JSON.stringify(c)])}function p(a){var c=a.tokens,d=a.tokensExcludingActor,e=a.tokenContactIdsExcludingActor,f=a.setPreviewThread,g=a.threadType,h=a.renderThreadView,j=a.renderThreadPreview,m=a.checkExistingThreads;a=a.children;var p=n(d,e,f,g);k(d);o(p,g,c,m);i.useEffect(function(){b("bs_curry")._1(f,function(a){return p})});if(p!==void 0)return i.jsx(l,{thread:p,renderThreadView:h,renderThreadPreview:j,children:a});else return null}e={useFindMatchingOptimisticThreadWithParticipants:n,useCreateOptimisticThreadForTokens:o,make:p};function q(a,c,d,e,f){var g=b("useReStore")(),h=b("bs_int64").to_string(b("MWPActor.bs").useActor(void 0)),j=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(g.table("participants")),function(a){return c.has(b("bs_int64").to_string(a.contactId))}),function(a){return b("bs_int64").to_string(a.threadKey)})},[g,c]));return b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a,d=new Set(j);return(a=b("ReQL.bs")).filter(a.filter(a.filter(a.filter(a.filter(a.fromTableAscending(g.table("threads")),function(a){return b("bs_caml").i64_eq(a.threadType,e)}),function(a){return a.threadName===void 0}),function(a){if(f)return!0;else return b("bs_caml").i64_eq(a.authorityLevel,b("LSAuthorityLevel.bs").optimistic)}),function(a){return d.has(b("bs_int64").to_string(a.threadKey))}),function(a){a=b("ReQLSuspense").toArray(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexDescending(g.table("participants").index("threadKeyReadWatermarkTimestampMs")),{hd:a.threadKey,tl:0}),function(a){return b("bs_int64").to_string(a.contactId)}));var d=a.filter(function(a){return a!==h});if(a.length===d.length||d.length!==c.size)return!1;else return d.every(function(a){return c.has(a)})})},[g,j,c,h,JSON.stringify(e)]))}function r(a){var c=a.tokensExcludingActor,d=a.tokens,e=a.threadType,f=a.setPreviewThread,g=a.renderThreadView,h=a.renderThreadPreview,j=a.checkExistingThreads;a=a.children;var k=i.useMemo(function(){return new Set(c.map(function(a){return b("bs_int64").to_string(a.id)}))},[c]),m=q(c,k,f,e,j);i.useEffect(function(){m!==void 0&&b("bs_curry")._1(f,function(a){return m})},[m]);if(m!==void 0)return i.jsx(l,{thread:m,renderThreadView:g,renderThreadPreview:h,children:a});else return i.jsx(p,{tokens:d,tokensExcludingActor:c,tokenContactIdsExcludingActor:k,setPreviewThread:f,threadType:e,renderThreadView:g,renderThreadPreview:h,checkExistingThreads:j,children:a})}var s={useFindExistingThreadWithTokens:q,make:r};function a(a){var c=a.tokens,d=a.areWeCreatingASecureThread,e=a.setPreviewThread,f=a.nullstate,g=a.renderThreadView,h=a.renderThreadPreview,j=a.checkExistingThreads;a=a.children;f=f!==void 0?b("bs_caml_option").valFromOption(f):null;j=j!==void 0?j:!0;var k=b("MWPActor.bs").useActor(void 0),l=i.useMemo(function(){return c.filter(function(a){return b("bs_caml").i64_neq(a.id,k)})},[c,k]);i.useEffect(function(){c.length===0&&b("bs_curry")._1(e,function(a){})},[c]);if(c.length===0)return f;var n=l.length;if(n!==1){if(n===0)if(d)return f;else return i.jsx(m,{recipientToken:b("bs_caml_array").get(c,0),setPreviewThread:e,renderThreadView:g,renderThreadPreview:h,children:a})}else{n=l[0];if(j)if(d)return i.jsx(r,{tokensExcludingActor:l,tokens:c,threadType:b("MessagingThreadType.bs").secureMessageOverWaOneToOne,setPreviewThread:e,renderThreadView:g,renderThreadPreview:h,checkExistingThreads:j,children:a});else return i.jsx(m,{recipientToken:n,setPreviewThread:e,renderThreadView:g,renderThreadPreview:h,children:a})}return i.jsx(r,{tokensExcludingActor:l,tokens:c,threadType:d?b("MessagingThreadType.bs").secureMessageOverWaGroup:b("MessagingThreadType.bs").group,setPreviewThread:e,renderThreadView:g,renderThreadPreview:h,checkExistingThreads:j,children:a})}var t=b("cr:2891");a=a;f.$MAWCreateOptimisticSecureThread$requireCondXplat=b("cr:2891");f.mawCreateOptimisticSecureThread=t;f.styles=j;f.ExistingThreadPreview=c;f.CanonicalThreadPreview=d;f.OptimisticThread=e;f.PossiblyOptimisticThread=s;f.make=a}),null);